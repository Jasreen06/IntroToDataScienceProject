---
title: "Project 1: Exploring Hotel Booking Cancellations"
author: "Group 6 : Jasreen Kaur Mehta, Pranav Dhawan, Tycho Gormley"
date: "`r Sys.Date()`"
output:
  html_document:
    code_folding: show
    number_sections: false
    toc: yes
    toc_depth: 3
    toc_float: yes
  pdf_document:
    toc: yes
    toc_depth: '3'
---

```{r init, include=F}
library(ezids)
library(ggplot2)
library(dplyr)
knitr::opts_chunk$set(results="markup", warning = F, message = F)
options(scientific=T, digits = 3) 
```

```{r}

# Load your dataset
df <-  read.csv("INNHotelsGroup.csv", header = TRUE)

df$type_of_meal_plan <- as.factor(df$type_of_meal_plan)
df$room_type_reserved <- as.factor(df$room_type_reserved)
df$booking_status <- as.factor(df$booking_status)
df$market_segment_type <- as.factor(df$market_segment_type)

# Create a binary variable for cancellations
df$canceled <- ifelse(df$booking_status == "Canceled", 1, 0)

summary(df)
```

** Checking if there is any missing values
```{r}
sum(is.na(data))
str(data)
```

```{r}
# Histogram for lead_time
ggplot(df, aes(x = lead_time)) + 
  geom_histogram(binwidth = 30, fill = "blue", color = "black") + 
  theme_minimal() + 
  ggtitle("Distribution of Lead Time")

# Boxplot for avg_price_per_room
ggplot(df, aes(y = avg_price_per_room)) + 
  geom_boxplot(fill = "orange") + 
  theme_minimal() + 
  ggtitle("Boxplot of Average Price per Room")

```

```{r}
# Customers with and without special requests
with_requests <- subset(df, no_of_special_requests > 0)
without_requests <- subset(df, no_of_special_requests == 0)

# Count cancellations
canceled_with_requests <- sum(with_requests$booking_status == "Canceled")
not_canceled_with_requests <- nrow(with_requests) - canceled_with_requests

canceled_without_requests <- sum(without_requests$booking_status == "Canceled")
not_canceled_without_requests <- nrow(without_requests) - canceled_without_requests

# Summary data frame
request_summary <- data.frame(
  Group = c("With Special Requests", "Without Special Requests"),
  Canceled = c(canceled_with_requests, canceled_without_requests),
  Not_Canceled = c(not_canceled_with_requests, not_canceled_without_requests)
)

# Print summary
print(request_summary)

# Bar plot of cancellation rates
ggplot(request_summary, aes(x = Group, y = Canceled, fill = Group)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Cancellation Rates by Special Requests",
       x = "Group",
       y = "Number of Cancellations") +
  theme_minimal()


```



```{r}
# Split data into two groups based on special requests
#with_requests <- df %>% filter(no_of_special_requests > 0)
#without_requests <- df %>% filter(no_of_special_requests == 0)

# Perform a t-test comparing cancellations between the two groups
t_test_result <- t.test(with_requests$canceled, without_requests$canceled, conf.level = 0.99)

# Output the result
print(t_test_result)

```
The t-test results show a t-value of -47.838, with a p-value < 2.2e-16, which means we can confidently reject the null hypothesis. This indicates that there is a significant difference in cancellation rates between customers who made special requests and those who didn’t.
Mean of Group with Requests: 0.202 (~20% cancellation rate)
Mean of Group without Requests: 0.432 (~43% cancellation rate)

So, customers who made special requests tend to cancel significantly less often (20%) than those who didn’t (43%). This suggests that special requests may be associated with a lower likelihood of cancellations.